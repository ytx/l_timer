<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer for Lecture</title>
    <link rel="stylesheet" href="css/quill.snow.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app-container">
        <header class="header">
            <h1 id="header-title">Lecture Preparation</h1>
            <div class="theme-controls">
                <div class="current-time-header">Current Time: <span id="current-time-header"></span></div>
                <button id="settings-btn" class="theme-toggle" title="Settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m8.66-15.66l-4.24 4.24m-4.24 4.24l-4.24 4.24m15.66-8.66l-6 0m-6 0l-6 0m15.66 8.66l-4.24-4.24m-4.24-4.24l-4.24-4.24"></path>
                    </svg>
                </button>
                <button id="editor-toggle" class="theme-toggle" title="Toggle Editor">
                    <svg id="editor-icon-show" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                    <svg id="editor-icon-hide" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                        <line x1="3" y1="3" x2="21" y2="21"/>
                    </svg>
                </button>
                <button id="mute-toggle" class="mute-toggle" title="Mute/Unmute">
                    <svg id="unmuted-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                    <svg id="muted-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                        <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                    </svg>
                </button>
                <button id="theme-toggle" class="theme-toggle" title="Toggle Theme">
                    <svg id="light-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>
                    </svg>
                    <svg id="dark-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                        <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
                    </svg>
                </button>
                <button id="fullscreen-btn" class="fullscreen-btn" title="Fullscreen">‚õ∂</button>
            </div>
        </header>

        <main class="main-content">

            <!-- Time Display -->
            <div class="time-display">
                <div class="timer" id="timer">50:00</div>
                
                <!-- Progress Indicator -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
                
                <div id="end-time-container">
                    <div class="end-time">End Time: <span id="end-time">--:--:--</span></div>
                    <div class="time-adjust-controls" id="time-adjust-controls" style="display: none;">
                        <button class="time-adjust-btn" id="end-time-minus-10" title="Earlier (-10min)">-10</button>
                        <button class="time-adjust-btn" id="end-time-minus-1" title="Earlier (-1min)">-1</button>
                        <button class="time-adjust-btn" id="end-time-plus-1" title="Later (+1min)">+1</button>
                        <button class="time-adjust-btn" id="end-time-plus-10" title="Later (+10min)">+10</button>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button id="start-lecture" class="action-btn lecture-btn">Start</button>
                <button id="start-lecture-break" class="icon-btn lecture-icon-btn" style="display: none;" title="Start Lecture">üìö</button>
                <button id="start-break1" class="icon-btn break-icon-btn" data-break-type="1" title="‰ºëÊÜ©ÈñãÂßãÔºà10ÂàÜÔºâ">‚òï</button>
                <button id="start-break2" class="icon-btn break-icon-btn" data-break-type="2" title="‰ºëÊÜ©ÈñãÂßãÔºà60ÂàÜÔºâ">üçΩÔ∏è</button>
                <button id="stop-timer" class="icon-btn stop-icon-btn" style="display: none;" title="ÂÅúÊ≠¢">üí§</button>
            </div>
        </main>

        <!-- Resizer -->
        <div class="resizer" id="resizer" style="display: none;">
            <div class="resizer-handle"></div>
        </div>

        <!-- Editor Area -->
        <aside class="editor-area" id="editor-area" style="display: none;">
            <div class="editor-container">
                <div class="editor-wrapper">
                    <div id="editor"></div>
                </div>
                <div class="zoom-controls">
                    <button id="zoom-out" class="zoom-btn" title="Zoom Out">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="8" y1="11" x2="14" y2="11"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                        </svg>
                    </button>
                    <span id="zoom-level">100%</span>
                    <button id="zoom-in" class="zoom-btn" title="Zoom In">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="11" y1="8" x2="11" y2="14"/>
                            <line x1="8" y1="11" x2="14" y2="11"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                        </svg>
                    </button>
                </div>

                <!-- Document Controls -->
                <div class="document-controls">
                    <select id="document-select" class="document-dropdown">
                        <option value="">-- New Document --</option>
                    </select>
                    <button id="save-document" class="control-btn" title="Save Document">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                            <polyline points="17 21 17 13 7 13 7 21"/>
                            <polyline points="7 3 7 8 15 8"/>
                        </svg>
                    </button>
                    <button id="delete-document" class="control-btn delete-btn" title="Delete Document" disabled>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3 6 5 6 21 6"/>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                            <line x1="10" y1="11" x2="10" y2="17"/>
                            <line x1="14" y1="11" x2="14" y2="17"/>
                        </svg>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Fixed Buttons -->
        <button id="github-btn" class="github-btn-fixed" title="GitHub Repository">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
        </button>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 data-i18n="modal-settings-title">Ë®≠ÂÆö</h2>
                    <button class="modal-close" id="close-settings">&times;</button>
                </div>

                <!-- Tab Navigation -->
                <div class="tab-navigation">
                    <button class="tab-btn active" data-tab="time-tab" data-i18n="tab-time">ÊôÇÈñì</button>
                    <button class="tab-btn" data-tab="sound-tab" data-i18n="tab-sound">Ë®ÄË™û„Éª„Çµ„Ç¶„É≥„Éâ</button>
                    <button class="tab-btn" data-tab="data-tab" data-i18n="tab-data">Ë®≠ÂÆöÁÆ°ÁêÜ</button>
                    <button class="tab-btn" data-tab="license-tab" data-i18n="tab-license">„É©„Ç§„Çª„É≥„Çπ</button>
                    <button class="tab-btn" data-tab="support-tab">‚òïÔ∏è</button>
                </div>

                <div class="modal-body">
                    <!-- Time Tab -->
                    <div id="time-tab" class="tab-content active">
                    <div class="setting-group">
                        <label data-i18n="label-lecture-time">Ë¨õÁæ©ÊôÇÈñì (ÂàÜ):</label>
                        <div class="time-input-group">
                            <button class="time-btn" data-action="decrease-lecture-settings">-</button>
                            <input type="number" id="lecture-time-settings" value="50" min="1" max="300">
                            <button class="time-btn" data-action="increase-lecture-settings">+</button>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label data-i18n="label-break-time">‰ºëÊÜ©ÊôÇÈñì (ÂàÜ):</label>
                        <div class="time-input-group">
                            <button class="time-btn" data-action="decrease-break1-settings">-</button>
                            <input type="number" id="break1-time-settings" value="10" min="1" max="120">
                            <button class="time-btn" data-action="increase-break1-settings">+</button>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label data-i18n="label-lunch-time">Êòº‰ºëÊÜ©ÊôÇÈñì (ÂàÜ):</label>
                        <div class="time-input-group">
                            <button class="time-btn" data-action="decrease-break2-settings">-</button>
                            <input type="number" id="break2-time-settings" value="60" min="1" max="120">
                            <button class="time-btn" data-action="increase-break2-settings">+</button>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label data-i18n="label-warning-time">‰∫àÈà¥ÊôÇÈñì (ÂàÜ):</label>
                        <div class="time-input-group">
                            <button class="time-btn" data-action="decrease-warning-time">-</button>
                            <input type="number" id="warning-time-settings" value="3" min="1" max="10">
                            <button class="time-btn" data-action="increase-warning-time">+</button>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label data-i18n="label-tick-interval">ÁµåÈÅéÈÄöÁü•ÈñìÈöî (Áßí):</label>
                        <div class="time-input-group">
                            <button class="time-btn" data-action="decrease-tick-interval">-</button>
                            <input type="number" id="tick-interval-settings" value="60" min="10" max="300" step="10">
                            <button class="time-btn" data-action="increase-tick-interval">+</button>
                        </div>
                    </div>
                    </div>

                    <!-- Sound Tab -->
                    <div id="sound-tab" class="tab-content">
                    <div class="setting-group">
                        <label data-i18n="label-language">Ë®ÄË™û:</label>
                        <select id="language-select" class="language-select">
                            <option value="ja">Êó•Êú¨Ë™û</option>
                            <option value="en">English</option>
                        </select>
                    </div>

                    <div class="setting-group">
                        <label data-i18n="label-volume">Èü≥Èáè:</label>
                        <input type="range" id="volume-slider" min="0" max="100" value="50">
                        <span id="volume-value">50%</span>
                    </div>

                    <div class="setting-group">
                        <label data-i18n="label-warning-sound">‰∫àÈà¥Èü≥:</label>
                        <div class="sound-controls">
                            <select id="sound1-select">
                                <option value="audio/sound1-1.wav" data-i18n="sound-warning-1">‰∫àÈà¥Èü≥1</option>
                                <option value="audio/sound1-2.wav" data-i18n="sound-warning-2">‰∫àÈà¥Èü≥2</option>
                                <option value="audio/sound1-3.wav" data-i18n="sound-warning-3">‰∫àÈà¥Èü≥3</option>
                            </select>
                            <button class="test-sound" data-sound="sound1" data-i18n="btn-test">„ÉÜ„Çπ„Éà</button>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label data-i18n="label-end-sound">ÁµÇ‰∫ÜÈü≥:</label>
                        <div class="sound-controls">
                            <select id="sound2-select">
                                <option value="audio/sound2-1.wav" data-i18n="sound-end-1">ÁµÇ‰∫ÜÈü≥1</option>
                                <option value="audio/sound2-2.wav" data-i18n="sound-end-2">ÁµÇ‰∫ÜÈü≥2</option>
                                <option value="audio/sound2-3.wav" data-i18n="sound-end-3">ÁµÇ‰∫ÜÈü≥3</option>
                            </select>
                            <button class="test-sound" data-sound="sound2" data-i18n="btn-test">„ÉÜ„Çπ„Éà</button>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label data-i18n="label-tick-sound">ÁµåÈÅéÈÄöÁü•Èü≥:</label>
                        <div class="sound-controls">
                            <select id="sound3-select">
                                <option value="audio/sound3-1.wav" data-i18n="sound-tick-1">ÁµåÈÅéÈÄöÁü•Èü≥1</option>
                                <option value="audio/sound3-2.wav" data-i18n="sound-tick-2">ÁµåÈÅéÈÄöÁü•Èü≥2</option>
                                <option value="audio/sound3-3.wav" data-i18n="sound-tick-3">ÁµåÈÅéÈÄöÁü•Èü≥3</option>
                            </select>
                            <button class="test-sound" data-sound="sound3" data-i18n="btn-test">„ÉÜ„Çπ„Éà</button>
                        </div>
                    </div>
                    </div>

                    <!-- Data Management Tab -->
                    <div id="data-tab" class="tab-content">
                        <div class="setting-group">
                            <label data-i18n="label-data-export-import">„Éá„Éº„Çø„ÅÆ„Ç®„ÇØ„Çπ„Éù„Éº„Éà / „Ç§„É≥„Éù„Éº„Éà:</label>
                            <textarea id="data-textarea" class="data-textarea" data-i18n-placeholder="placeholder-data-textarea" placeholder="Export: Click 'Export' button to show data here.&#10;Import: Paste JSON data here and click 'Import' button."></textarea>
                            <div class="data-controls">
                                <button id="select-all-btn" class="data-btn secondary" data-i18n="button-select-all">„Åô„Åπ„Å¶ÈÅ∏Êäû</button>
                                <button id="export-data-btn" class="data-btn" data-i18n="button-export">„Ç®„ÇØ„Çπ„Éù„Éº„Éà</button>
                                <button id="import-data-btn" class="data-btn" data-i18n="button-import">„Ç§„É≥„Éù„Éº„Éà</button>
                            </div>
                        </div>
                    </div>

                    <!-- License Tab -->
                    <div id="license-tab" class="tab-content scrollable-tab">
                        <div class="license-content">
                            <h2 data-i18n="heading-license">‰ΩøÁî®„Åó„Å¶„ÅÑ„Çã„É©„Ç§„Éñ„É©„É™Á≠â„ÅÆ„É©„Ç§„Çª„É≥„ÇπË°®Á§∫</h2>
                            <br>
                            <h3>Quill.js</h3>
                            <p>Copyright (c) 2017, Slab</p>
                            <p>Copyright (c) 2014, Jason Chen</p>
                            <p>Copyright (c) 2013, salesforce.com</p>
                            <br>
                            <p>All rights reserved.</p>
                            <br>
                            <p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>
                            <ol>
                                <li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
                                <li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
                                <li>Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</li>
                            </ol>
                            <br>
                            <p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
                        </div>
                    </div>

                    <!-- Support Tab -->
                    <div id="support-tab" class="tab-content">
                        <div class="support-content">
                            <h2>Support the Developer</h2>
                            <p>If you find this timer useful, consider supporting the development!</p>
                            <br>
                            <div class="bmc-container">
                                <a href="https://buymeacoffee.com/xpenguin" target="_blank" rel="noopener noreferrer">
                                    <img src="images/bmc_qr.png" alt="Buy Me a Coffee QR Code" class="bmc-qr">
                                </a>
                                <br>
                                <p>
                                    <a href="https://buymeacoffee.com/xpenguin" target="_blank" rel="noopener noreferrer" class="bmc-url">
                                        https://buymeacoffee.com/xpenguin
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="lib/quill.min.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/resizer.js"></script>
    <script src="js/document.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/data-manager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>