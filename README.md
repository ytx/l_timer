# 研修用タイマーアプリ (Timer for Lecture)

研修での講義と休憩を管理するためのタイマーアプリケーションです。
頑張って話していると、休憩を忘れがちになるので、時間を音で通知して、適切な休憩を促します。
以前の講義後アンケートで、休憩が少ないとの指摘が多かったため、作ってみました。
作成後、講義で使ってみたところ、集合研修・オンライン研修ともにアンケート結果が改善しました。

https://xpenguin.biz/l_timer/ から直接起動できます。
データはすべてブラウザのLocalStorageに保存され、サーバーへは送信されませんので、安心してお使いください。

コードはすべてClaude Codeが書いています。私は内容をほとんど見てません。
私が欲しいものを作ってもらっていて、Windows/macOSのChromeのみ動作確認しています。 
あまり、リッチにすることは考えていませんが、要望などあれば検討します。
ここから下は、Claude Code が勝手に書いているのでやや大げさですが、 だいたい合っていると思います。

## 主要機能

### ⏰ タイマー機能
- **50分講義 + 10分/60分休憩** のデフォルト設定
- **1分単位での時間調整** (講義: 1-300分、休憩: 1-120分)
- **オーバータイム対応**: 講義終了後もカウントアップ継続
- **自動遷移**: 休憩終了後に自動的に講義開始
- **終了時刻カスタマイズ**: リアルタイムで終了時刻を調整（-10/-1/+1/+10分）
- **逆算タイマー**: カスタム終了時刻からの残り時間自動計算

### 🔊 音声システム
- **3種類の音声** × **3バリエーション**:
  - 警告音: 講義終了前の警告（デフォルト3分前、1-10分で調整可能）
  - 終了音: セッション完了時の通知
  - 経過音: オーバータイム中の定期音（デフォルト60秒間隔、10-300秒で調整可能）
- **音量調整**: 0-100%スライダー
- **一時消音**: 🔊/🔇 ボタンで即座にミュート切り替え
- **自動ミュート解除**: 講義・休憩開始時に自動的にミュート解除
- **テスト再生**: 設定画面で各音声の確認

### 🎨 ユーザーインターフェース
- **レスポンシブデザイン**: モバイル・デスクトップ対応
- **ダークモード/ライトモード**: 🌙/☀️ ボタンで切り替え
- **フルスクリーン対応**: ⛶ ボタンでプレゼンテーション表示
- **フラットデザイン**: タイマー表示の枠・影を削除したシンプルなUI
- **SVGアイコン**: スパナ（設定）、ペン（エディタ）、スピーカー（ミュート）など
- **カラーテーマ**:
  - 講義中: 青色系
  - 休憩中: 緑色系
  - オーバータイム: 赤色系
- **動的レイアウト**:
  - 画面幅に応じてタイマーのフォントサイズが滑らかに変化
  - プログレスバーが7桁の等幅フォント幅に自動調整
  - エディタとの割合変更に連動してタイマーサイズが変化
- **アイコンボタン**: 統一されたデザイン
  - ☕ 休憩開始（10分）
  - 🍽️ 昼休憩開始（60分）
  - 📚 講義開始（休憩中）
  - 💤 停止

### ⚙️ 設定機能
- **時間設定**: 
  - 講義時間 (1-300分)
  - 休憩時間 (1-120分)
  - 昼休憩時間 (1-120分)
  - 警告タイミング (1-10分)
  - 経過音間隔 (10-300秒)
- **音声選択**: 各音声タイプから選択
- **自動保存**: 全設定をLocalStorageに保存
- **設定復元**: 起動時に前回設定を復元

### 📝 エディタ機能
- **WYSIWYG エディタ**: Quill.js ベースのリッチテキストエディタ
- **分割画面**: タイマーとエディタを左右に配置、ドラッグでサイズ調整
- **動的リサイズ**: エディタとタイマーの割合を変更すると、タイマーのフォントサイズが自動調整
- **ドキュメント管理**: 複数のメモを保存・読込・削除
- **ズーム機能**: 50%-200%の範囲でエディタ表示を拡大/縮小
- **自動保存**: ドキュメントはLocalStorageに保存
- **タイトル自動生成**: 本文の最初の行から自動でタイトルを生成

### 💾 データ管理
- **エクスポート**: 全設定とドキュメントをJSON形式でエクスポート
- **インポート**: バックアップからの復元機能
- **一括選択**: エクスポートデータを簡単にコピー
- **ストレージ消去**: すべてのデータを削除して初期状態に戻す

### 🌐 多言語対応
- **初回起動時の言語選択**: 初めて使用する際に日本語/英語を選択
- **言語切り替え**: 設定画面でいつでも変更可能
- **全UI対応**: ラベル、ボタン、ツールチップ、ダイアログすべて対応
- **自動保存**: 言語設定を記憶

## 使用方法

### 基本操作
1. **講義開始**: 「Start」ボタンまたはキーボード`L`
2. **休憩開始**: ☕ または 🍽️ ボタン、またはキーボード`B`
3. **停止**: 💤 ボタンまたはキーボード`S`/`Escape`
4. **設定**: ヘッダーの⚙️ボタンで設定画面を開く
5. **エディタ**: ヘッダーの📝ボタンでエディタを表示/非表示

### 終了時刻の調整
- 講義・休憩中に終了時刻の下に表示される調整ボタンを使用
- **-10**: 10分早める
- **-1**: 1分早める  
- **+1**: 1分遅らせる
- **+10**: 10分遅らせる

### キーボードショートカット
- `L`: 講義開始
- `B`: 休憩開始  
- `S` / `Escape`: タイマー停止
- `T`: テーマ切り替え
- `F`: フルスクリーン切り替え

## ファイル構成
```
l_timer/
├── index.html              # メインHTML
├── css/
│   ├── styles.css          # メインスタイルシート
│   └── quill.snow.css      # Quill.js テーマ
├── js/
│   ├── app.js              # タイマーアプリケーション
│   ├── editor.js           # エディタマネージャー
│   ├── document.js         # ドキュメント管理
│   ├── resizer.js          # リサイズマネージャー
│   ├── data-manager.js     # データエクスポート/インポート
│   └── i18n.js             # 多言語対応
├── lib/
│   └── quill.min.js        # Quill.js ライブラリ
├── audio/                  # 音声ファイル
│   ├── sound1-1.wav        # 警告音1
│   ├── sound1-2.wav        # 警告音2
│   ├── sound1-3.wav        # 警告音3
│   ├── sound2-1.wav        # 終了音1
│   ├── sound2-2.wav        # 終了音2
│   ├── sound2-3.wav        # 終了音3
│   ├── sound3-1.wav        # 経過音1
│   ├── sound3-2.wav        # 経過音2
│   ├── sound3-3.wav        # 経過音3
│   ├── README.md           # 音声ファイル説明
│   └── generate_more_sounds.py  # 音声生成スクリプト
├── images/
│   └── bmc_qr.png          # Buy Me a Coffee QRコード
├── README.md               # このファイル（日本語）
├── README-en.md            # 英語版README
└── CLAUDE.md               # 実装詳細サマリー
```

## 技術仕様
- **HTML5 Audio API**: 音声再生
- **Quill.js**: WYSIWYGエディタ
- **CSS Custom Properties**: テーマシステム
- **CSS Container Queries**: エディタ表示時の動的レイアウト調整
- **CSS clamp()**: 流動的なフォントサイズとレイアウト
- **LocalStorage**: 設定とドキュメントの永続化
- **ResizeObserver API**: レスポンシブレイアウト
- **Responsive Design**: モバイル対応
- **Offline Ready**: インターネット接続不要

## 動作環境
- **推奨ブラウザ**: Chrome, Edge
- **対応ブラウザ**: Firefox, Safari（一部制限あり）
- **OS**: Windows, macOS, Linux, iOS, Android

## 音声について
- 音声ファイルは [Mixkit](https://mixkit.co/) からダウンロード
- WAV形式でオフライン再生対応
- Python スクリプトでカスタム音声生成も可能

## トラブルシューティング

### 音声が再生されない場合
1. ブラウザの音声設定を確認
2. 🔊 ボタンがミュートになっていないか確認
3. 音量スライダーが0になっていないか確認
4. 設定画面の「テスト」ボタンで音声確認

### 表示が崩れる場合
- ブラウザのズーム設定を100%に設定
- フルスクリーンモード（⛶ボタン）を試用

### 設定が保存されない場合
- ブラウザのLocalStorageが有効か確認
- プライベートモードでは設定が保存されません

詳細な実装情報は `CLAUDE.md` を参照してください。
